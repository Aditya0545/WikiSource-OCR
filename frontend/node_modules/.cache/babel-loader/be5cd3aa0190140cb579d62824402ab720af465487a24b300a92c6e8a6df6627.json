{"ast":null,"code":"var _jsxFileName = \"/home/aditya/Mediawiki-Works/Tesseract-OCR-Wiki/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Container, Box, Typography, Card, CardContent, CardHeader, Paper, CircularProgress, Alert, Divider, FormControl, InputLabel, Select, MenuItem, TextField, Button, LinearProgress, Chip, Stack, Tooltip } from '@mui/material';\nimport { useDropzone } from 'react-dropzone';\nimport axios from 'axios';\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\nimport ArrowBackIosNewIcon from '@mui/icons-material/ArrowBackIosNew';\nimport ArrowForwardIosIcon from '@mui/icons-material/ArrowForwardIos';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BATCH_SIZE = 5;\nfunction App() {\n  _s();\n  const [file, setFile] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [result, setResult] = useState('');\n  const [error, setError] = useState('');\n  const [progress, setProgress] = useState(0);\n  const [totalPages, setTotalPages] = useState(0);\n  const [languages, setLanguages] = useState([]);\n  const [selectedLanguage, setSelectedLanguage] = useState('');\n  const [fileUrl, setFileUrl] = useState('');\n  const [batch, setBatch] = useState(1);\n  const [batchPages, setBatchPages] = useState({\n    start: 1,\n    end: 1\n  });\n  useEffect(() => {\n    axios.get('http://localhost:5000/api/languages').then(response => {\n      setLanguages(response.data);\n      // Set default language to English if available\n      const englishLang = response.data.find(lang => lang.code === 'eng');\n      if (englishLang) {\n        setSelectedLanguage('eng');\n      }\n    }).catch(err => {\n      console.error('Error fetching languages:', err);\n      setError('Failed to load languages. Please refresh the page.');\n    });\n  }, []);\n  const fetchBatch = async batchNum => {\n    if (!selectedLanguage) {\n      setError('Please select a language first');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    setResult('');\n    setProgress(0);\n    const formData = new FormData();\n    if (file) formData.append('file', file);\n    if (fileUrl) formData.append('file_url', fileUrl);\n    formData.append('language', selectedLanguage);\n    formData.append('batch', batchNum);\n    formData.append('batch_size', BATCH_SIZE);\n    try {\n      const response = await axios.post('http://localhost:5000/api/ocr', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        },\n        onUploadProgress: progressEvent => {\n          const percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n          setProgress(percentCompleted);\n        }\n      });\n      setResult(response.data.text);\n      setTotalPages(response.data.total_pages || 0);\n      setBatch(response.data.batch);\n      const start = (response.data.batch - 1) * response.data.batch_size + 1;\n      const end = start + response.data.pages - 1;\n      setBatchPages({\n        start,\n        end\n      });\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'An error occurred during OCR processing');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const onDrop = acceptedFiles => {\n    setFile(acceptedFiles[0]);\n    setBatch(1);\n  };\n  const handleUrlProcess = async () => {\n    if (!fileUrl) return;\n    setFile(null);\n    setBatch(1);\n    fetchBatch(1);\n  };\n  const handleFileProcess = async () => {\n    if (!file) return;\n    setBatch(1);\n    fetchBatch(1);\n  };\n  const handleDownload = () => {\n    const blob = new Blob([result], {\n      type: 'text/plain'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `ocr_result_${batchPages.start}-${batchPages.end}.txt`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n  const handleDownloadPDF = async () => {\n    const formData = new FormData();\n    if (file) formData.append('file', file);\n    if (fileUrl) formData.append('file_url', fileUrl);\n    formData.append('language', selectedLanguage);\n    formData.append('batch', batch);\n    formData.append('batch_size', BATCH_SIZE);\n    try {\n      const response = await axios.post('http://localhost:5000/api/ocr/pdf', formData, {\n        responseType: 'blob'\n      });\n      const url = window.URL.createObjectURL(new Blob([response.data], {\n        type: 'application/pdf'\n      }));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `ocr_result_${batchPages.start}-${batchPages.end}.pdf`);\n      document.body.appendChild(link);\n      link.click();\n      link.parentNode.removeChild(link);\n      window.URL.revokeObjectURL(url);\n    } catch (err) {\n      setError('Failed to generate PDF.');\n    }\n  };\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive\n  } = useDropzone({\n    onDrop,\n    accept: {\n      'image/*': ['.png', '.jpg', '.jpeg', '.tiff'],\n      'application/pdf': ['.pdf'],\n      'application/x-djvu': ['.djvu']\n    },\n    multiple: false,\n    disabled: !!fileUrl\n  });\n  const canGoPrev = batch > 1;\n  const canGoNext = totalPages > 0 && batchPages.end < totalPages;\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      minHeight: '100vh',\n      bgcolor: 'linear-gradient(135deg, #e3f2fd 0%, #ffffff 100%)',\n      py: 6\n    },\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"sm\",\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        elevation: 6,\n        sx: {\n          borderRadius: 4,\n          mt: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          avatar: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Wikisource-logo.svg/410px-Wikisource-logo.svg.png\",\n            alt: \"Wikisource logo\",\n            style: {\n              width: 48,\n              height: 48,\n              borderRadius: 8,\n              background: '#fff'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 15\n          }, this),\n          title: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h4\",\n            fontWeight: 700,\n            children: \"Wikisource OCR\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 20\n          }, this),\n          subheader: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            color: \"text.secondary\",\n            children: \"Convert PDF/DjVu to text using Tesseract OCR\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 24\n          }, this),\n          sx: {\n            textAlign: 'center',\n            pb: 0\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(FormControl, {\n            fullWidth: true,\n            sx: {\n              mb: 3\n            },\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              id: \"language-select-label\",\n              children: \"Language\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              labelId: \"language-select-label\",\n              value: selectedLanguage,\n              label: \"Language\",\n              onChange: e => setSelectedLanguage(e.target.value),\n              disabled: languages.length === 0,\n              children: languages.map(lang => /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: lang.code,\n                children: [lang.name, \" (\", lang.script, \")\"]\n              }, lang.code, true, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"PDF/DjVu File URL (e.g. Wikimedia Commons)\",\n            variant: \"outlined\",\n            fullWidth: true,\n            value: fileUrl,\n            onChange: e => setFileUrl(e.target.value),\n            disabled: !!file,\n            sx: {\n              mb: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            onClick: handleUrlProcess,\n            disabled: !fileUrl || loading,\n            startIcon: /*#__PURE__*/_jsxDEV(CloudUploadIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 26\n            }, this),\n            fullWidth: true,\n            sx: {\n              mb: 2,\n              fontWeight: 600,\n              letterSpacing: 1\n            },\n            children: \"Process from URL\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            onClick: handleFileProcess,\n            disabled: !file || !!fileUrl || loading,\n            startIcon: /*#__PURE__*/_jsxDEV(CloudUploadIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 26\n            }, this),\n            fullWidth: true,\n            sx: {\n              mb: 3,\n              fontWeight: 600,\n              letterSpacing: 1\n            },\n            children: \"Process File\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Paper, {\n            ...getRootProps(),\n            sx: {\n              p: 3,\n              textAlign: 'center',\n              cursor: fileUrl ? 'not-allowed' : 'pointer',\n              bgcolor: isDragActive ? 'action.hover' : 'background.paper',\n              border: '2px dashed',\n              borderColor: isDragActive ? 'primary.main' : 'grey.300',\n              mb: 3,\n              opacity: fileUrl ? 0.5 : 1,\n              transition: 'box-shadow 0.2s',\n              boxShadow: isDragActive ? 4 : 0\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              ...getInputProps(),\n              disabled: !!fileUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 15\n            }, this), loading ? /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                width: '100%'\n              },\n              children: [/*#__PURE__*/_jsxDEV(LinearProgress, {\n                variant: progress > 0 && progress < 100 ? 'determinate' : 'indeterminate',\n                value: progress,\n                sx: {\n                  height: 8,\n                  borderRadius: 4\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 19\n              }, this), totalPages === 0 ? /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                sx: {\n                  mt: 1\n                },\n                children: \"Detecting pages or downloading/converting file...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                sx: {\n                  mt: 1\n                },\n                children: [\"Processing batch: Pages \", batchPages.start, \"\\u2013\", batchPages.end, \" of \", totalPages]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Stack, {\n              alignItems: \"center\",\n              spacing: 1,\n              children: [/*#__PURE__*/_jsxDEV(CloudUploadIcon, {\n                color: \"primary\",\n                sx: {\n                  fontSize: 40,\n                  mb: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                children: isDragActive ? \"Drop the file here\" : fileUrl ? \"File upload disabled when URL is provided\" : \"Drag and drop a file here, or click to select\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this), file && /*#__PURE__*/_jsxDEV(Chip, {\n            label: `Selected file: ${file.name}`,\n            color: \"info\",\n            variant: \"outlined\",\n            sx: {\n              mb: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 15\n          }, this), fileUrl && /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"text.secondary\",\n            sx: {\n              mb: 2\n            },\n            children: [\"URL: \", fileUrl]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 15\n          }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n            severity: \"error\",\n            sx: {\n              mb: 2\n            },\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this), result && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center',\n              mb: 2,\n              flexWrap: 'wrap',\n              gap: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Previous Batch\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outlined\",\n                  onClick: () => fetchBatch(batch - 1),\n                  disabled: !canGoPrev || loading,\n                  startIcon: /*#__PURE__*/_jsxDEV(ArrowBackIosNewIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 305,\n                    columnNumber: 34\n                  }, this),\n                  sx: {\n                    minWidth: 120\n                  },\n                  children: \"Previous\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Chip, {\n              label: `Pages ${batchPages.start}–${batchPages.end} of ${totalPages}`,\n              color: \"primary\",\n              sx: {\n                mx: 2,\n                fontWeight: 600,\n                fontSize: 16\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Next Batch\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outlined\",\n                  onClick: () => fetchBatch(batch + 1),\n                  disabled: !canGoNext || loading,\n                  endIcon: /*#__PURE__*/_jsxDEV(ArrowForwardIosIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 323,\n                    columnNumber: 32\n                  }, this),\n                  sx: {\n                    minWidth: 120\n                  },\n                  children: \"Next\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Download TXT\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outlined\",\n                  color: \"primary\",\n                  onClick: handleDownload,\n                  startIcon: /*#__PURE__*/_jsxDEV(DownloadIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 332,\n                    columnNumber: 100\n                  }, this),\n                  sx: {\n                    ml: 2,\n                    minWidth: 160\n                  },\n                  disabled: loading,\n                  children: \"Download TXT\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Download PDF\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  color: \"primary\",\n                  onClick: handleDownloadPDF,\n                  startIcon: /*#__PURE__*/_jsxDEV(DownloadIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 339,\n                    columnNumber: 104\n                  }, this),\n                  sx: {\n                    minWidth: 160\n                  },\n                  disabled: loading,\n                  children: \"Download PDF\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          textAlign: 'center',\n          mt: 4,\n          color: 'text.secondary'\n        },\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          children: [\"Powered by \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Tesseract OCR\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 24\n          }, this), \" \\xA0|\\xA0 \", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"https://en.wikisource.org/\",\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            style: {\n              color: '#1976d2',\n              textDecoration: 'none'\n            },\n            children: \"Wikisource\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 59\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"D3nK+nGOJ4V8UoPqLRgwS9ey+Bo=\", false, function () {\n  return [useDropzone];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Container","Box","Typography","Card","CardContent","CardHeader","Paper","CircularProgress","Alert","Divider","FormControl","InputLabel","Select","MenuItem","TextField","Button","LinearProgress","Chip","Stack","Tooltip","useDropzone","axios","CloudUploadIcon","ArrowBackIosNewIcon","ArrowForwardIosIcon","DownloadIcon","jsxDEV","_jsxDEV","BATCH_SIZE","App","_s","file","setFile","loading","setLoading","result","setResult","error","setError","progress","setProgress","totalPages","setTotalPages","languages","setLanguages","selectedLanguage","setSelectedLanguage","fileUrl","setFileUrl","batch","setBatch","batchPages","setBatchPages","start","end","get","then","response","data","englishLang","find","lang","code","catch","err","console","fetchBatch","batchNum","formData","FormData","append","post","headers","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","text","total_pages","batch_size","pages","_err$response","_err$response$data","onDrop","acceptedFiles","handleUrlProcess","handleFileProcess","handleDownload","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","handleDownloadPDF","responseType","window","link","setAttribute","parentNode","getRootProps","getInputProps","isDragActive","accept","multiple","disabled","canGoPrev","canGoNext","sx","minHeight","bgcolor","py","children","maxWidth","elevation","borderRadius","mt","avatar","src","alt","style","width","height","background","fileName","_jsxFileName","lineNumber","columnNumber","title","variant","fontWeight","subheader","color","textAlign","pb","fullWidth","mb","id","labelId","value","label","onChange","e","target","length","map","name","script","onClick","startIcon","letterSpacing","p","cursor","border","borderColor","opacity","transition","boxShadow","alignItems","spacing","fontSize","severity","display","flexWrap","gap","minWidth","mx","endIcon","ml","rel","textDecoration","_c","$RefreshReg$"],"sources":["/home/aditya/Mediawiki-Works/Tesseract-OCR-Wiki/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Container,\n  Box,\n  Typography,\n  Card,\n  CardContent,\n  CardHeader,\n  Paper,\n  CircularProgress,\n  Alert,\n  Divider,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  TextField,\n  Button,\n  LinearProgress,\n  Chip,\n  Stack,\n  Tooltip\n} from '@mui/material';\nimport { useDropzone } from 'react-dropzone';\nimport axios from 'axios';\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\nimport ArrowBackIosNewIcon from '@mui/icons-material/ArrowBackIosNew';\nimport ArrowForwardIosIcon from '@mui/icons-material/ArrowForwardIos';\nimport DownloadIcon from '@mui/icons-material/Download';\n\nconst BATCH_SIZE = 5;\n\nfunction App() {\n  const [file, setFile] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [result, setResult] = useState('');\n  const [error, setError] = useState('');\n  const [progress, setProgress] = useState(0);\n  const [totalPages, setTotalPages] = useState(0);\n  const [languages, setLanguages] = useState([]);\n  const [selectedLanguage, setSelectedLanguage] = useState('');\n  const [fileUrl, setFileUrl] = useState('');\n  const [batch, setBatch] = useState(1);\n  const [batchPages, setBatchPages] = useState({ start: 1, end: 1 });\n\n  useEffect(() => {\n    axios.get('http://localhost:5000/api/languages')\n      .then(response => {\n        setLanguages(response.data);\n        // Set default language to English if available\n        const englishLang = response.data.find(lang => lang.code === 'eng');\n        if (englishLang) {\n          setSelectedLanguage('eng');\n        }\n      })\n      .catch(err => {\n        console.error('Error fetching languages:', err);\n        setError('Failed to load languages. Please refresh the page.');\n      });\n  }, []);\n\n  const fetchBatch = async (batchNum) => {\n    if (!selectedLanguage) {\n      setError('Please select a language first');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n    setResult('');\n    setProgress(0);\n\n    const formData = new FormData();\n    if (file) formData.append('file', file);\n    if (fileUrl) formData.append('file_url', fileUrl);\n    formData.append('language', selectedLanguage);\n    formData.append('batch', batchNum);\n    formData.append('batch_size', BATCH_SIZE);\n\n    try {\n      const response = await axios.post('http://localhost:5000/api/ocr', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n        onUploadProgress: (progressEvent) => {\n          const percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n          setProgress(percentCompleted);\n        },\n      });\n      setResult(response.data.text);\n      setTotalPages(response.data.total_pages || 0);\n      setBatch(response.data.batch);\n      const start = (response.data.batch - 1) * response.data.batch_size + 1;\n      const end = start + response.data.pages - 1;\n      setBatchPages({ start, end });\n    } catch (err) {\n      setError(err.response?.data?.error || 'An error occurred during OCR processing');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onDrop = (acceptedFiles) => {\n    setFile(acceptedFiles[0]);\n    setBatch(1);\n  };\n\n  const handleUrlProcess = async () => {\n    if (!fileUrl) return;\n    setFile(null);\n    setBatch(1);\n    fetchBatch(1);\n  };\n\n  const handleFileProcess = async () => {\n    if (!file) return;\n    setBatch(1);\n    fetchBatch(1);\n  };\n\n  const handleDownload = () => {\n    const blob = new Blob([result], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `ocr_result_${batchPages.start}-${batchPages.end}.txt`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  const handleDownloadPDF = async () => {\n    const formData = new FormData();\n    if (file) formData.append('file', file);\n    if (fileUrl) formData.append('file_url', fileUrl);\n    formData.append('language', selectedLanguage);\n    formData.append('batch', batch);\n    formData.append('batch_size', BATCH_SIZE);\n\n    try {\n      const response = await axios.post('http://localhost:5000/api/ocr/pdf', formData, {\n        responseType: 'blob',\n      });\n      const url = window.URL.createObjectURL(new Blob([response.data], { type: 'application/pdf' }));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `ocr_result_${batchPages.start}-${batchPages.end}.pdf`);\n      document.body.appendChild(link);\n      link.click();\n      link.parentNode.removeChild(link);\n      window.URL.revokeObjectURL(url);\n    } catch (err) {\n      setError('Failed to generate PDF.');\n    }\n  };\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'image/*': ['.png', '.jpg', '.jpeg', '.tiff'],\n      'application/pdf': ['.pdf'],\n      'application/x-djvu': ['.djvu']\n    },\n    multiple: false,\n    disabled: !!fileUrl\n  });\n\n  const canGoPrev = batch > 1;\n  const canGoNext = totalPages > 0 && batchPages.end < totalPages;\n\n  return (\n    <Box sx={{ minHeight: '100vh', bgcolor: 'linear-gradient(135deg, #e3f2fd 0%, #ffffff 100%)', py: 6 }}>\n      <Container maxWidth=\"sm\">\n        <Card elevation={6} sx={{ borderRadius: 4, mt: 4 }}>\n          <CardHeader\n            avatar={\n              <img\n                src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Wikisource-logo.svg/410px-Wikisource-logo.svg.png\"\n                alt=\"Wikisource logo\"\n                style={{ width: 48, height: 48, borderRadius: 8, background: '#fff' }}\n              />\n            }\n            title={<Typography variant=\"h4\" fontWeight={700}>Wikisource OCR</Typography>}\n            subheader={<Typography variant=\"subtitle1\" color=\"text.secondary\">Convert PDF/DjVu to text using Tesseract OCR</Typography>}\n            sx={{ textAlign: 'center', pb: 0 }}\n          />\n          <CardContent>\n            <FormControl fullWidth sx={{ mb: 3 }}>\n              <InputLabel id=\"language-select-label\">Language</InputLabel>\n              <Select\n                labelId=\"language-select-label\"\n                value={selectedLanguage}\n                label=\"Language\"\n                onChange={(e) => setSelectedLanguage(e.target.value)}\n                disabled={languages.length === 0}\n              >\n                {languages.map((lang) => (\n                  <MenuItem key={lang.code} value={lang.code}>\n                    {lang.name} ({lang.script})\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n\n            <TextField\n              label=\"PDF/DjVu File URL (e.g. Wikimedia Commons)\"\n              variant=\"outlined\"\n              fullWidth\n              value={fileUrl}\n              onChange={e => setFileUrl(e.target.value)}\n              disabled={!!file}\n              sx={{ mb: 2 }}\n            />\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={handleUrlProcess}\n              disabled={!fileUrl || loading}\n              startIcon={<CloudUploadIcon />}\n              fullWidth\n              sx={{ mb: 2, fontWeight: 600, letterSpacing: 1 }}\n            >\n              Process from URL\n            </Button>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={handleFileProcess}\n              disabled={!file || !!fileUrl || loading}\n              startIcon={<CloudUploadIcon />}\n              fullWidth\n              sx={{ mb: 3, fontWeight: 600, letterSpacing: 1 }}\n            >\n              Process File\n            </Button>\n\n            <Paper\n              {...getRootProps()}\n              sx={{\n                p: 3,\n                textAlign: 'center',\n                cursor: fileUrl ? 'not-allowed' : 'pointer',\n                bgcolor: isDragActive ? 'action.hover' : 'background.paper',\n                border: '2px dashed',\n                borderColor: isDragActive ? 'primary.main' : 'grey.300',\n                mb: 3,\n                opacity: fileUrl ? 0.5 : 1,\n                transition: 'box-shadow 0.2s',\n                boxShadow: isDragActive ? 4 : 0\n              }}\n            >\n              <input {...getInputProps()} disabled={!!fileUrl} />\n              {loading ? (\n                <Box sx={{ width: '100%' }}>\n                  <LinearProgress variant={progress > 0 && progress < 100 ? 'determinate' : 'indeterminate'} value={progress} sx={{ height: 8, borderRadius: 4 }} />\n                  {totalPages === 0 ? (\n                    <Typography variant=\"body2\" sx={{ mt: 1 }}>\n                      Detecting pages or downloading/converting file...\n                    </Typography>\n                  ) : (\n                    <Typography variant=\"body2\" sx={{ mt: 1 }}>\n                      Processing batch: Pages {batchPages.start}–{batchPages.end} of {totalPages}\n                    </Typography>\n                  )}\n                </Box>\n              ) : (\n                <Stack alignItems=\"center\" spacing={1}>\n                  <CloudUploadIcon color=\"primary\" sx={{ fontSize: 40, mb: 1 }} />\n                  <Typography>\n                    {isDragActive\n                      ? \"Drop the file here\"\n                      : fileUrl\n                        ? \"File upload disabled when URL is provided\"\n                        : \"Drag and drop a file here, or click to select\"}\n                  </Typography>\n                </Stack>\n              )}\n            </Paper>\n\n            {file && (\n              <Chip label={`Selected file: ${file.name}`} color=\"info\" variant=\"outlined\" sx={{ mb: 2 }} />\n            )}\n            {fileUrl && (\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                URL: {fileUrl}\n              </Typography>\n            )}\n\n            {error && (\n              <Alert severity=\"error\" sx={{ mb: 2 }}>\n                {error}\n              </Alert>\n            )}\n\n            {/* Batch navigation and download buttons */}\n            {result && (\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 2, flexWrap: 'wrap', gap: 1 }}>\n                <Tooltip title=\"Previous Batch\">\n                  <span>\n                    <Button\n                      variant=\"outlined\"\n                      onClick={() => fetchBatch(batch - 1)}\n                      disabled={!canGoPrev || loading}\n                      startIcon={<ArrowBackIosNewIcon />}\n                      sx={{ minWidth: 120 }}\n                    >\n                      Previous\n                    </Button>\n                  </span>\n                </Tooltip>\n                <Chip\n                  label={`Pages ${batchPages.start}–${batchPages.end} of ${totalPages}`}\n                  color=\"primary\"\n                  sx={{ mx: 2, fontWeight: 600, fontSize: 16 }}\n                />\n                <Tooltip title=\"Next Batch\">\n                  <span>\n                    <Button\n                      variant=\"outlined\"\n                      onClick={() => fetchBatch(batch + 1)}\n                      disabled={!canGoNext || loading}\n                      endIcon={<ArrowForwardIosIcon />}\n                      sx={{ minWidth: 120 }}\n                    >\n                      Next\n                    </Button>\n                  </span>\n                </Tooltip>\n                <Tooltip title=\"Download TXT\">\n                  <span>\n                    <Button variant=\"outlined\" color=\"primary\" onClick={handleDownload} startIcon={<DownloadIcon />} sx={{ ml: 2, minWidth: 160 }} disabled={loading}>\n                      Download TXT\n                    </Button>\n                  </span>\n                </Tooltip>\n                <Tooltip title=\"Download PDF\">\n                  <span>\n                    <Button variant=\"contained\" color=\"primary\" onClick={handleDownloadPDF} startIcon={<DownloadIcon />} sx={{ minWidth: 160 }} disabled={loading}>\n                      Download PDF\n                    </Button>\n                  </span>\n                </Tooltip>\n              </Box>\n            )}\n          </CardContent>\n        </Card>\n        <Box sx={{ textAlign: 'center', mt: 4, color: 'text.secondary' }}>\n          <Typography variant=\"body2\">\n            Powered by <b>Tesseract OCR</b> &nbsp;|&nbsp; <a href=\"https://en.wikisource.org/\" target=\"_blank\" rel=\"noopener noreferrer\" style={{ color: '#1976d2', textDecoration: 'none' }}>Wikisource</a>\n          </Typography>\n        </Box>\n      </Container>\n    </Box>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}